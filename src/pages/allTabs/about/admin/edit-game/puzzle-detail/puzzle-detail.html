<ion-header>

  <ion-navbar color="hcolor">
    <ion-title>Puzzle Detail</ion-title>
  </ion-navbar>

</ion-header>
<ion-content padding>
  <ion-list no-border>
    <ion-list-header no-border no-lines>
      Location detail:
    </ion-list-header>
    <ion-item>
      <ion-thumbnail item-start>
        <img src={{locationDetail.photoUrl}}>
      </ion-thumbnail>
      <h2> {{locationDetail.name}}</h2>
      <p> Location Type:{{locationDetail.type}}</p>
      <p> Location Order:{{locationDetail.order}}</p>
    </ion-item>
    <ion-list-header>Puzzles:</ion-list-header>
    <ion-item-sliding *ngFor="let puzzleId of puzzleIds">
      <ion-item text-wrap>
        <ion-thumbnail item-start>
          <img src={{puzzleDetails[puzzleId].photoUrl}}>
        </ion-thumbnail>
        <h2> {{puzzleDetails[puzzleId].title}}</h2>
        <p> Content:{{puzzleDetails[puzzleId].puzzleContent}}</p>
        <p> Hint1 :{{puzzleDetails[puzzleId].hint1}}</p>
        <p> Hint2 :{{puzzleDetails[puzzleId].hint2}}</p>
        <p> Answer :{{puzzleDetails[puzzleId].answer}}</p>
        <p>Strict Answer?{{puzzleDetails[puzzleId].strictAnswer}}</p>
        <p>Special Puzzle?{{puzzleDetails[puzzleId].special}}</p>
        <p>Order:{{puzzleDetails[puzzleId].order}}</p>
      </ion-item>
      <ion-item-options slide="left">
        <button ion-button color="primary" (click)="editPuzzle(puzzleDetails[puzzleId],puzzleId)">
          <ion-icon name="color-wand"></ion-icon>
          Edit
        </button>
        <button ion-button color="danger" (click)="deletePuzzle(puzzleId)">
          <ion-icon name="trash"></ion-icon>
          Del
        </button>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>
  <button ion-button block color="danger" *ngIf="!editPuzzleFlag" (click)="toggleForm()">Add Puzzle</button>
  <ion-item-group *ngIf="addPuzzleFlag||editPuzzleFlag">
    <ion-item>
      <ion-label floating>Puzzle title:</ion-label>
      <ion-input  type="text" placeholder="Puzzle title:"
                 [(ngModel)]="puzzleTemp.title"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label floating>Puzzle content:</ion-label>
      <ion-textarea type="text"
                    [(ngModel)]="puzzleTemp.puzzleContent"></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label floating>Puzzle hint1:</ion-label>
      <ion-input type="text" placeholder="Puzzle hint1:"
                 [(ngModel)]="puzzleTemp.hint1"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label floating>Puzzle hint2:</ion-label>
      <ion-input type="text" placeholder="Puzzle hint2:"
                 [(ngModel)]="puzzleTemp.hint2"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label floating>Puzzle answer:</ion-label>
      <ion-input type="text" placeholder="Puzzle answer:"
                 [(ngModel)]="puzzleTemp.answer"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Strict answer?</ion-label>
      <ion-checkbox [(ngModel)]="puzzleTemp.strictAnswer"></ion-checkbox>
    </ion-item>
    <ion-item>
      <ion-label>Puzzle special?</ion-label>
      <ion-checkbox [(ngModel)]="puzzleTemp.special"></ion-checkbox>
    </ion-item>
    <ion-item *ngIf="editPuzzleFlag">
      <ion-label floating>Puzzle order:</ion-label>
      <ion-input *ngIf="editPuzzleFlag" type="text" placeholder="Puzzle order:"
                 [(ngModel)]="puzzleTemp.order"></ion-input>
    </ion-item>


    <div class="puzzleImage">
      <img src="{{puzzleTemp.photoUrl}}">
    </div>
    <button ion-button block (click)="chooseImage()">Choose from Gallery</button>
    <div class="spacer" style="height: 20px;"></div>
    <button ion-button block color="hcolor" (click)="updatePuzzle()">Update</button>
    <div class="spacer" style="height: 20px;"></div>
    <button ion-button block color="hcolor" (click)="cancelUpdate()">Cancel</button>

  </ion-item-group>
  <div class="spacer" style="height: 30px;"></div>
</ion-content>
